{"version":3,"file":"Colors.xml.js","sourceRoot":"","sources":["../../src/android/Colors.xml.ts"],"names":[],"mappings":";;;;;AAAA,gEAA4D;AAC5D,gDAAwB;AAGxB,0DAAkF;AAElF,MAAM,oBAAoB,GAAG,yBAAyB,CAAC;AACvD,MAAM,0BAA0B,GAAG,+BAA+B,CAAC;AAEnE,SAAS,uBAAuB,CAAC,GAAY,EAAE,eAAgC;IAC7E,MAAM,MAAM,GAAG,mCAAgB,CAAC,GAAG,EAAE;QACnC,QAAQ,EAAE;YACR;gBACE,IAAI,EAAE,WAAW;gBACjB,QAAQ,EAAE;oBACR;wBACE,GAAG,EAAE,CAAC;wBACN,OAAO,EAAE,+GAA+G;qBACzH;oBACD;wBACE,GAAG,EAAE,CAAC;wBACN,IAAI,EAAE,OAAO;wBACb,UAAU,EAAE;4BACV,IAAI,EAAE,yBAAyB;yBAChC;wBACD,QAAQ,EAAE;4BACR;gCACE,IAAI,EAAE,sBAAW,CAAC,EAAE,CAAC,GAAG,CAAC,eAAe,CAAC,KAAK,CAAC;6BAChD;yBACF;qBACF;iBACF;aACF;SACF;KACF,CAAC,CAAC;IACH,OAAO,MAAM,CAAC;AAChB,CAAC;AAED,KAAK,UAAU,+BAA+B,CAC5C,QAAgB,EAChB,eAAiC;IAEjC,IAAI,CAAC,eAAe,EAAE;QACpB,OAAO;KACR;IACD,MAAM,UAAU,GAAG,MAAM,8BAAW,CAAC,QAAQ,CAAC,CAAC;IAC/C,MAAM,oBAAoB,GAAG,uBAAuB,CAAC,UAAU,EAAE,eAAe,CAAC,CAAC;IAClF,MAAM,+BAAY,CAAC,QAAQ,EAAE,oBAAoB,CAAC,CAAC;AACrD,CAAC;AAED;;GAEG;AACY,KAAK,UAAU,kBAAkB,CAC9C,eAAuB,EACvB,eAAgC,EAChC,uBAAyC;IAEzC,MAAM,OAAO,CAAC,GAAG,CAAC;QAChB,+BAA+B,CAC7B,cAAI,CAAC,OAAO,CAAC,eAAe,EAAE,oBAAoB,CAAC,EACnD,eAAe,CAChB;QACD,+BAA+B,CAC7B,cAAI,CAAC,OAAO,CAAC,eAAe,EAAE,0BAA0B,CAAC,EACzD,uBAAuB,CACxB;KACF,CAAC,CAAC;AACL,CAAC;AAfD,qCAeC","sourcesContent":["import colorString, { ColorDescriptor } from 'color-string';\nimport path from 'path';\nimport { Element } from 'xml-js';\n\nimport { readXmlFile, writeXmlFile, mergeXmlElements } from '../xml-manipulation';\n\nconst COLORS_XML_FILE_PATH = './res/values/colors.xml';\nconst COLORS_NIGHT_XML_FILE_PATH = './res/values-night/colors.xml';\n\nfunction ensureDesiredXmlContent(xml: Element, backgroundColor: ColorDescriptor): Element {\n  const result = mergeXmlElements(xml, {\n    elements: [\n      {\n        name: 'resources',\n        elements: [\n          {\n            idx: 0,\n            comment: ` Below line is handled by '@expo/configure-splash-screen' command and it's discouraged to modify it manually `,\n          },\n          {\n            idx: 1,\n            name: 'color',\n            attributes: {\n              name: 'splashscreen_background',\n            },\n            elements: [\n              {\n                text: colorString.to.hex(backgroundColor.value),\n              },\n            ],\n          },\n        ],\n      },\n    ],\n  });\n  return result;\n}\n\nasync function configureBackgroundColorForFile(\n  filePath: string,\n  backgroundColor?: ColorDescriptor\n) {\n  if (!backgroundColor) {\n    return;\n  }\n  const xmlContent = await readXmlFile(filePath);\n  const configuredXmlContent = ensureDesiredXmlContent(xmlContent, backgroundColor);\n  await writeXmlFile(filePath, configuredXmlContent);\n}\n\n/**\n * @param androidMainPath Path to the main directory containing code and resources in Android project. In general that would be `android/app/src/main`.\n */\nexport default async function configureColorsXml(\n  androidMainPath: string,\n  backgroundColor: ColorDescriptor,\n  darkModeBackgroundColor?: ColorDescriptor\n) {\n  await Promise.all([\n    configureBackgroundColorForFile(\n      path.resolve(androidMainPath, COLORS_XML_FILE_PATH),\n      backgroundColor\n    ),\n    configureBackgroundColorForFile(\n      path.resolve(androidMainPath, COLORS_NIGHT_XML_FILE_PATH),\n      darkModeBackgroundColor\n    ),\n  ]);\n}\n"]}
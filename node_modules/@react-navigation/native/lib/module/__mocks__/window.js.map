{"version":3,"sources":["window.tsx"],"names":["location","URL","listeners","entries","state","href","index","currentState","history","pushState","_","path","Object","assign","origin","slice","push","length","replaceState","go","n","setTimeout","Math","abs","forEach","cb","back","forward","addEventListener","type","listener","removeEventListener","filter"],"mappings":"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","sourcesContent":["const location = new URL('', 'http://example.com');\n\nlet listeners: (() => void)[] = [];\nlet entries = [{ state: null, href: location.href }];\nlet index = 0;\n\nlet currentState: any = null;\n\nconst history = {\n  get state() {\n    return currentState;\n  },\n\n  pushState(state: any, _: string, path: string) {\n    Object.assign(location, new URL(path, location.origin));\n\n    currentState = state;\n    entries = entries.slice(0, index + 1);\n    entries.push({ state, href: location.href });\n    index = entries.length - 1;\n  },\n\n  replaceState(state: any, _: string, path: string) {\n    Object.assign(location, new URL(path, location.origin));\n\n    currentState = state;\n    entries[index] = { state, href: location.href };\n  },\n\n  go(n: number) {\n    setTimeout(() => {\n      if (\n        (n > 0 && n < entries.length - index) ||\n        (n < 0 && Math.abs(n) <= index)\n      ) {\n        index += n;\n        Object.assign(location, new URL(entries[index].href));\n        listeners.forEach((cb) => cb);\n      }\n    }, 0);\n  },\n\n  back() {\n    this.go(-1);\n  },\n\n  forward() {\n    this.go(1);\n  },\n};\n\nconst addEventListener = (type: 'popstate', listener: () => void) => {\n  if (type === 'popstate') {\n    listeners.push(listener);\n  }\n};\n\nconst removeEventListener = (type: 'popstate', listener: () => void) => {\n  if (type === 'popstate') {\n    listeners = listeners.filter((cb) => cb !== listener);\n  }\n};\n\nexport default {\n  location,\n  history,\n  addEventListener,\n  removeEventListener,\n};\n"]}